---
import type { Data } from '../';

export interface Props {
    data: Data,
    theme?: string | null;
    valuePrefix?: string | null;
    valueSuffix?: string | null;
    valuePrecision?: number | null;
}
const { data, theme, valuePrefix = '', valueSuffix = '', valuePrecision = 0 } = Astro.props;

// @todo: support different orientations (vertical/horizontal/auto?)
// for horizontal we could use zoom as scroll: https://stackblitz.com/edit/echart-playground-fqytxzey?file=index.html
// using an yAxis.max = Math.max(...dataX) avoids yAxis scale changes on scroll
---

<bar-chart
  data-theme={ theme }
  data-value-prefix={ valuePrefix }
  data-value-suffix={ valueSuffix }
  data-value-precision={ valuePrecision }
>
  <div class="canvas" data-canvas></div>
  <script data-chart-data
    is:inline
    type="application/json" 
    set:html={ JSON.stringify(data, null, 2) } 
  />
</bar-chart>

<script src="./BarChart.client.ts"></script>

<style>
  bar-chart .canvas {
    width: 100%;
    height: 80vh;
  }

  @media print {
    .canvas {
      break-inside: avoid;
    }
  }
</style>
